#####-----> Focus Tree Selection: On Actions <><> <><> <><> <><> <><>

### USE FOR QUICK NAVIGATION
### COUNTRIES: [TAG]
### DLC: [BASE] [UNITED] [TFV] [DOD] [WTT] [MTG] [LAR] [BFTB] [NSB]

on_actions = {
	on_startup = {
		effect = {
			if = {	#changes do not show on map preview
				limit = {
					has_start_date > 1945.01.01
				}
				every_country = {
					limit = {
						has_idea = MTG_naval_treaty_adherent
					}
					remove_ideas = MTG_naval_treaty_adherent
				}
				set_global_flag = SOV_fourth_international_fired
				set_global_flag = earhart_disappeared
				#as if yalta happened
				set_global_flag = r56_unlocked_fate_of_germany_decisions
				set_global_flag = r56_unlocked_fate_of_austria_decisions
				#below is only required when having selected the 1936 scenario first
				every_country = {
					limit = {
						NOT = {
							original_tag = SWE
							original_tag = FIN
							original_tag = IRE
							original_tag = ICE
							original_tag = AUS
							original_tag = SWI
							original_tag = HUN
							original_tag = ROM
							original_tag = BUL
							original_tag = ITA
							original_tag = SPR
							original_tag = POR
							original_tag = MON
							original_tag = NEP
							original_tag = BHU
							original_tag = SIA
							original_tag = VIN
							original_tag = AFG
							original_tag = SAN
							original_tag = MNC
							original_tag = YEM
							original_tag = PRC
							original_tag = XSM
							original_tag = TNG
							original_tag = ALB
							original_tag = GXC

							original_tag = INS
							original_tag = COG
							original_tag = FRI
							original_tag = JAP
							original_tag = MPL
							original_tag = SWK
							original_tag = LIE
							original_tag = ADR
							original_tag = SHX
							original_tag = MAL
							original_tag = OMA
						}
					}

					add_to_array = {
						array = global.members_of_un
						value = THIS.id
					}
					set_country_flag = joined_to_un_flag
				}	
				SYR = {
					add_to_array = {
						array = global.members_of_un
						value = THIS.id
					}
					set_country_flag = joined_to_un_flag
				}
				BLR = {
					add_to_array = {
						array = global.members_of_un
						value = THIS.id
					}
					set_politics = {
                	    ruling_party = communism
                	    elections_allowed = no
                    }
					set_country_flag = joined_to_un_flag
				}
				UKR = {
					add_to_array = {
						array = global.members_of_un
						value = THIS.id
					}
					set_politics = {
                	    ruling_party = communism
                	    elections_allowed = no
                    }
					set_country_flag = joined_to_un_flag
				}
				RAJ = {
					set_country_flag = RAJ_famine_manual_trigger
				}
				YUG = {
					load_focus_tree = cw_yugoslavia_focus
				}
				GRE = {
					load_focus_tree = cw_greece_focus
				}
				CZE = {
					load_focus_tree = cw_czechoslovakia_focus
				}
				POL = {
					load_focus_tree = cw_poland_focus
				}
				BUL = {
					load_focus_tree = cw_bulgaria_focus
				}
				HUN = {
					load_focus_tree = cw_hungary_focus
				}
				ROM = {
					load_focus_tree = cw_romania_focus
				}
				ALB = {
					load_focus_tree = cw_albania_focus
				}
				NOR = {
					set_global_flag = NOR_the_norwegian_queen_is_dead
				}
				FRA = {
					load_focus_tree = cw_france_focus
					set_country_flag = FRA_1936_election
					set_country_flag = leclerc_commander
					set_country_flag = koenig_commander		#in reality busy with other stuff
					set_country_flag = de_gaulle_commander	#also rather busy...
					set_country_flag = de_lattre_commander
					set_country_flag = juin_commander
				}
				ENG = {
					load_focus_tree = cw_uk_focus
					set_country_flag = baldwin_resigned
				}
				USA = {
					load_focus_tree = cw_usa_focus
				}
				SOV = {
					load_focus_tree = cw_soviet_focus
					set_country_flag = SOV_fixed_choo_choo
					add_ideas = SOV_vyacheslav_molotov
					add_ideas = SOV_lazar_kaganovich
					every_state = {
						limit = {
							OR = {
								is_owned_by = PREV
								is_owned_by = ROM	#significant presence
							}
							state_strategic_value > 90
						}
						create_unit = {
							division = "name = \"Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.4"
							owner = SOV
							count = 15
						}
						create_unit = {
							division = "name = \"Mekhanizirovaniy Diviziya\" division_template = \"Mekhanizirovaniy Diviziya\" start_experience_factor = 0.4"
							owner = SOV
							count = 1
						}
					}
					every_state = {		#lower XP so not all units look the same
						limit = {
							OR = {
								is_owned_by = PREV
								is_owned_by = ROM	#significant presence
							}
							state_strategic_value > 60
						}
						create_unit = {
							division = "name = \"Strelkovaya Diviziya\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.3"
							owner = SOV
							count = 6
						}
						create_unit = {
							division = "name = \"Mekhanizirovaniy Diviziya\" division_template = \"Mekhanizirovaniy Diviziya\" start_experience_factor = 0.3"
							owner = SOV
							count = 1
						}
					}
				}
				ITA = {
					load_focus_tree = cw_italy_focus
				}
				FIN = {
					load_focus_tree = cw_finland_focus
				}
				HOL = {
					load_focus_tree = cw_netherlands_focus
				}
				CHL = {
					set_country_flag = r56_chile_new_democratic_leader
				}
				CHI = {
					set_country_flag = yun_sumitted
					set_global_flag = CHI_no_national_front_flag
				}
				PER = {
					load_focus_tree = cw_iran_focus
				}
				TUR = {
					set_province_name = {
						id = 9868
						name = "Erzincan"
					}
					set_province_name = {
						id = 7530
						name = "Cizre"
					}
					set_province_name = {
						id = 876
						name = "Elazığ"
					}
					set_province_name = {
						id = 10497
						name = "Siirt"
					}
					set_province_name = {
						id = 12376
						name = "Ağrı"
					}
					set_province_name = {
						id = 12476
						name = "Hakkari"
					}
				}
				#Burma railway
				build_railway = {
					level = 1
					build_only_on_allied = no
					path = { 1403 12125 10193 4348 7587 1427 }
					start_province = 1403
					target_province = 1427
				}
				#Resources - reminder: scaled by supply, infra and tech
				859 = {	#Saudi oil boosted 900%
					add_resource = {
						type = oil
						amount = 36
					}
				}
				489 = {	#Venezuelan oil boosted 100%
					add_resource = {
						type = oil
						amount = 50
					}
				}
				307 = {
					add_resource = {
						type = oil
						amount = 30
					}
				}
				46 = {	#Romanian oil down 60%
					add_resource = {
						type = oil
						amount = -24
					}
				}
				229 = {	#Soviet oil down 50%
					add_resource = {
						type = oil
						amount = -40
					}
				}
				#countries to make load generic
				every_possible_country = {
					limit = {
						OR = {
							original_tag = SAU
							original_tag = ETH
							original_tag = MAL
							original_tag = SPR
							AND = {	#lazy evaluation to avoid error
								exists = yes
								capital_scope = {
									OR = {
										is_on_continent = south_america
										is_on_continent = middle_east
									}
								}
								NOT = {
									original_tag = PER
								}
							}
							AND = {
								exists = no
								any_core_state = {
									OR = {
										is_on_continent = south_america
										#is_on_continent = middle_east	#allows Israel/Palestine trees which still work for their time period
									}
								}
							}
						}
					}
					load_focus_tree = generic_focus
				}
			}
		}
	}
	on_new_term_election  = {
		effect = {
			if = {
				limit = {
					original_tag = HUN
					date < 1946.01.01
					has_start_date > 1945.01.01
				}
				country_event = cold_war.1
			}
			else_if = {
				limit = {
					original_tag = GRE
					date < 1947.01.01
					has_start_date > 1945.01.01
				}
				country_event = cold_war.13
			}
		}
	}
	on_declare_war = {
		effect = {
			if = {
				limit = {
					tag = CHI
					FROM = { tag = PRC }
				}
				news_event = cold_war.28
			}
		}
	}
	on_capitulation = {
		effect = {
			if = {
				limit = {
					has_start_date > 1945.01.01
					OR = {
						original_tag = VIN
						original_tag = LAO	#France for some reason doesnt know how to give this land back...
					}
					FRI = {
						is_subject_of = FRA
					}
					FROM = {
						OR = {
							tag = FRA
							is_ally_with = FRA
							NOT = {	#for when UK capitulates Vietnam
								has_war_with = FRA
							}
						}
					}
					NOT = {
						has_country_flag = CW_scripted_peace_triggered
					}
				}
				set_country_flag = CW_scripted_peace_triggered	#prevent the country from getting the same scripted peace multiple times
				if = {
					limit = {
						original_tag = LAO
					}
					FRI = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					else = {	#setup first Indochina war
						FRI = {
							set_autonomy = {
								target = ROOT
								autonomous_state = autonomy_dominion
								#end_wars causes glitched control
							}
							ROOT = {
								set_politics = {	#revert puppeting
									ruling_party = communism
									elections_allowed = no
								}
								add_ideas = ICE_disloyal
								if = {
									limit = {
										has_tech = r56_guerilla_warfare
									}
									set_technology = {
										r56_double_envelopment = 1
										r56_elastic_defence = 1
										r56_infiltration_assault = 1
										r56_infiltration_in_depth = 1
										r56_backhand_blow = 1
										r56_tactical_withdrawal = 1
									}
								}
							}
							every_owned_state = {
								limit = {
									is_core_of = VIN
									NOT = {
										state = 286	#seperate entity in Indochina that Im pretty sure they didnt control
									}
								}
								transfer_state_to = VIN
							}
						}
					}
				}
			}
		}
	}
}